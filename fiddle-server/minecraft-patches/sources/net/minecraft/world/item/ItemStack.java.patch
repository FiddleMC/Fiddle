--- a/net/minecraft/world/item/ItemStack.java
+++ b/net/minecraft/world/item/ItemStack.java
@@ -202,6 +_,14 @@
 
             @Override
             public void encode(RegistryFriendlyByteBuf buffer, ItemStack value) {
+                // Fiddle start - Item mapping - Implementation - Apply at ItemStack encoding
+                org.fiddlemc.fiddle.impl.packetmapping.item.ItemMappingContextImpl itemMappingContext = new org.fiddlemc.fiddle.impl.packetmapping.item.ItemMappingContextImpl(buffer.getClientViewOrFallback(), buffer.isEncodingItemFrameItem, buffer.isEncodingStonecutterRecipeResult);
+                ItemStack mappedValue = org.fiddlemc.fiddle.impl.packetmapping.item.ItemMappingPipelineImpl.get().apply(value, itemMappingContext);
+                this.encodeUnmapped(buffer, mappedValue);
+            }
+
+            private void encodeUnmapped(RegistryFriendlyByteBuf buffer, ItemStack value) {
+                // Fiddle end - Item mapping - Implementation - Apply at ItemStack encoding
                 if (value.isEmpty() || value.getItem() == null) { // CraftBukkit - NPE fix itemstack.getItem()
                     buffer.writeVarInt(0);
                 } else {
