From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Martijn Muijsers <martijnmuijsers@live.nl>
Date: Tue, 18 Jul 2023 22:42:43 +0200
Subject: [PATCH] Client perspective - For players - Set based on resource pack
 status

License: GPL-3.0 (https://www.gnu.org/licenses/gpl-3.0.html)
Fiddle - https://fiddlemc.org

diff --git a/src/main/java/net/minecraft/server/players/PlayerList.java b/src/main/java/net/minecraft/server/players/PlayerList.java
index 71febe3f1458b2aff5a890b78836981e84fcbca7..82baf4137c9778818bf5e9e06bdbac680c3ac2b9 100644
--- a/src/main/java/net/minecraft/server/players/PlayerList.java
+++ b/src/main/java/net/minecraft/server/players/PlayerList.java
@@ -211,6 +211,7 @@ public abstract class PlayerList {
         player.hasBeenPlacedIntoPlayerList = true;
         Connection connection = playerconnection.connection;
         // Fiddle end - client perspective - send resource pack
+        player.setClientPerspective(player.getBukkitEntity().getResourcePackStatus() == org.bukkit.event.player.PlayerResourcePackStatusEvent.Status.SUCCESSFULLY_LOADED ? org.fiddlemc.fiddle.packet.ClientPerspectiveCategory.JAVA_WITH_ENABLED_RESOURCE_PACK.mostLikelyPerspective : org.fiddlemc.fiddle.packet.ClientPerspectiveCategory.JAVA_DEFAULT.mostLikelyPerspective); // Fiddle - client perspective - player - set based on resource pack status
         player.isRealPlayer = true; // Paper
         player.loginTime = System.currentTimeMillis(); // Paper
         GameProfile gameprofile = player.getGameProfile();
