From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Martijn Muijsers <martijnmuijsers@live.nl>
Date: Sun, 30 Jul 2023 18:18:35 +0200
Subject: [PATCH] Client perspective - Item replacements - Send replaceable
 updates after game mode change

License: GPL-3.0 (https://www.gnu.org/licenses/gpl-3.0.html)
Fiddle - https://fiddlemc.org

diff --git a/src/main/java/net/minecraft/server/level/ServerPlayerGameMode.java b/src/main/java/net/minecraft/server/level/ServerPlayerGameMode.java
index 58f972832c39a27a8ccd606f9144e1c54adbf6f3..d55a5154f2b4b8f9196ab2eb66c375bfa7e71440 100644
--- a/src/main/java/net/minecraft/server/level/ServerPlayerGameMode.java
+++ b/src/main/java/net/minecraft/server/level/ServerPlayerGameMode.java
@@ -103,6 +103,13 @@ public class ServerPlayerGameMode {
     protected void setGameModeForPlayer(GameType gameMode, @Nullable GameType previousGameMode) {
         this.previousGameModeForPlayer = previousGameMode;
         this.gameModeForPlayer = gameMode;
+        // Fiddle start - client perspective - item replacements - send update packets for replaceables after game mode change
+        if (previousGameMode != gameMode) {
+            if (previousGameMode == GameType.CREATIVE || gameMode == GameType.CREATIVE) {
+                this.player.sendUpdatesForDeepReplaceableContent(true, false);
+            }
+        }
+        // Fiddle end - client perspective - item replacements - send update packets for replaceables after game mode change
         gameMode.updatePlayerAbilities(this.player.getAbilities());
     }
 
