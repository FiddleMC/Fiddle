From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Martijn Muijsers <martijnmuijsers@live.nl>
Date: Thu, 11 May 2023 19:55:10 +0200
Subject: [PATCH] Singleton providing all loaded Fiddle packs

License: GPL-3.0 (https://www.gnu.org/licenses/gpl-3.0.html)
Fiddle - https://fiddlemc.org

diff --git a/src/main/java/org/fiddlemc/fiddle/pack/FiddlePacks.java b/src/main/java/org/fiddlemc/fiddle/pack/FiddlePacks.java
new file mode 100644
index 0000000000000000000000000000000000000000..40cf1cb24a0bf286b2f9219cc67da30073100b49
--- /dev/null
+++ b/src/main/java/org/fiddlemc/fiddle/pack/FiddlePacks.java
@@ -0,0 +1,41 @@
+// Fiddle - packs
+
+package org.fiddlemc.fiddle.pack;
+
+import org.jetbrains.annotations.Nullable;
+
+/**
+ * A singleton containing all Fiddle packs that are loaded.
+ * <br>
+ * This is populated after all Fiddle pack content has been fully loaded into the server,
+ * i.e. all custom resources (e.g. blocks, items) have been injected, the resource packs for players
+ * and other such derived information have been built, and data pack content has been added.
+ * This is populated *before* Bukkit plugins are enabled.
+ * TODO actually populate ^
+ */
+public final class FiddlePacks {
+
+    private FiddlePacks() {
+        throw new RuntimeException();
+    }
+
+    /**
+     * This will be null if and only if not initialized.
+     */
+    private static FiddlePack @Nullable [] packs = null;
+
+    public static void setPacks(FiddlePack[] packs) {
+        if (FiddlePacks.packs != null) {
+            throw new IllegalStateException("Tried setting the list of Fiddle packs when it was already initialized");
+        }
+        FiddlePacks.packs = packs;
+    }
+
+    public static FiddlePack[] getPacks() {
+        if (FiddlePacks.packs == null) {
+            throw new IllegalStateException("Tried getting the list of Fiddle packs before it was initialized");
+        }
+        return FiddlePacks.packs;
+    }
+
+}
